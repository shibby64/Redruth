<!doctype html>
<html lang="en" class="h-100">

<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-12CZNGHQJ6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-12CZNGHQJ6');
</script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta property='og:title' content='Passmore Edwards Community Story' />
  <meta property='og:image' content='https://redruthpe.herokuapp.com/images/Redruth.jpg' />
  <meta property='og:description'
    content="Collecting the stories of people related to Redruth's historic Passmore Edwards Free Library" />
  <meta property='og:url' content='https://redruthpe.herokuapp.com/' />
  <meta property='og:image:width' content='1200' />
  <meta property='og:image:height' content='627' />

  <title>Redruth Reading Room Project</title>
  <link rel="stylesheet" href="\css\record.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
  <meta name="theme-color" content="#1500BF">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-GNBV24KT1T"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-GNBV24KT1T');
  </script>
  <script onload="recordingPrompts()"></script>
  <script onload="getCurrentCollection()"></script>
</head>

<body class="d-flex flex-column h-100">
  <div class="backgroundRadial">
  </div>
  <div class="backgroundGradient">
  </div>
  <div class="backgroundGradientRed" style="display: none;" >
  </div>
  <!-- header -->
  <header class="mt-3">
    <nav>
      <div><a href="https://redruth-auth.auth.us-east-1.amazoncognito.com/login?client_id=34mnnp4ops7eg5tg5eb95q3hb3&response_type=code&scope=email+openid&redirect_uri=http://localhost:3000/admin.html"
         id="loginButton">Login</a></div>
      <div class="container">
        <div class="row text-center py-4 justify-content-md-center">
          <div class="col-4 col-md-2  col-lg-1 pt-3 ">
            <a href="#" id="aboutButton">About</a>
          </div>
          <div class="col-4 col-md-2  col-lg-2 text-center ">
            <a class="logo" href="https://readingroom.herokuapp.com/?promptid=36"><img src="/images/logo.png" alt="logo"></a>
          </div>
          <div class="col-4 col-md-2 col-lg-1 pt-3 ">
            <a href="/listen.html">Listen</a>
          </div>
        </div>
      </div>
    </nav>
  </header>


  <!-- recording page -->
  <main class="flex-shrink-0" id="recording">
    <div class="container">
      <div class="row justify-content-around align-content-center flex-wrap main-content">
        <div class="col-12 col-lg-6 text-center">
          <h5 class="mt-5" id="project"></h5>
          <!-- <h4 class="my-5 showPrompt" style="z-index: 2;"> -->
            <div class="listCenter">
              <details class="promptDetails">
                <summary id="currentPromptList"></summary>
                <ul class="promptList" id="recordPrompts"></ul>
              </details>
            </div>
            <div id="prompt_id_val" style="display: none;"></div>
              <!-- <br>
              <br>
          </h4> -->
        </div>
        <div class="col-12 text-center" id="mobileMode">
          <!-- recordButton -->
          <a href="#" id="recordButton" class="mx-auto buttonGradient" onclick="record()" ontap>
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-mic-fill"
              viewBox="0 0 16 16">
              <path d="M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0V3z" />
              <path
                d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z" />
            </svg>
          </a>
          <!-- stopButton -->
          <a href="#" id="stopButton" class="mx-auto buttonGradient Rec" style="display:none;" onclick="record()">
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-stop-fill"
              viewBox="0 0 16 16"><path d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z" />
            </svg>
          </a>
        </div>
        <div class="col-12 text-center mt-5 mb-5" id="buttonText">
          <h6 class="mb-3" id="recordText">Press to Start Recording</h6>
          <h5 id="countDownTimer"></h5>
        </div>
        
      </div>
    </div>
  </main>
  
  
  <!-- info page -->
  <main class="flex-shrink-0 info" id="info1" style="display:none;">
    <div class="container">
      <div class="row justify-content-around align-content-center flex-wrap main-content">
        <div class="col-12 text-center">
          <div class="smallwidth">
            <div class="row text-center" id = "waveContainer">
              <div class="col-8 col-md-9"><div id="waveform" class="mb-2"></div></div>
              <div class="col-4 col-md-3">
                <a href="#" class="btn round-button-small" id="playButton" style="display:none; "><svg xmlns="http://www.w3.org/2000/svg" width="60" height="24" fill="currentColor" id = "playIcon" class="bi bi-play-fill" viewBox="0 0 16 16"> <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/> </svg></a>
                <br>
                <a href="#" class="btn round-button-small" id = "trash" style="margin-top: 20px" onclick="discard()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
                  <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
                  </svg>
                </a>
              </div>
            </div>
            <h6 class="mt-3 text-center showPrompt" id = "replayPrompt">

            </h6>
            <hr>
          </div>
        </div>
        <div class="smallwidth">
          <input type="hidden" id="projectVal" name="project" value="Redruth Project">
          <!-- <input type="hidden" id="promptVal" name="promptVal" value=""> -->
          <input type="hidden" id="prompt" name="prompt"> <!-- value must get update -->
          <div class="mb-3 col-12 ">
            <label for="title" class="form-label">Story Title</label>
            <input type="text" class="" id="title" placeholder="Add a Title for Your Story">

          </div>
          <div class="mb-3 col-12">
            <label for="comments" class="form-label">Additional Comments</label>
            <textarea class="" id="comments" rows="3" placeholder="Provide Additional Details"></textarea>
          </div>
          <div class="mb-3 col-12 text-center" style="display:none;" id="errorMessage">
            <p>Please fill out both Title and Comments</p>
          </div>
          <div class="mb-3 col-12 text-center">
            <button type="button" class="btn round-button" id="info1NextButton">Add Contact Info</button>
            <button type="button" class="btn round-button highlight-button" id="info1SubmitButton" onclick="getURLParam()">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- info2 page -->
  <main class="flex-shrink-0 info" id="info2" style="display:none;">
    <div class="container ">
      <div class="row justify-content-around align-content-center flex-wrap main-content">
        <div class="col-12 text-center">
          <div class="smallwidth">
            <h6 class="text-center showPrompt">

            </h6>
            <hr>
          </div>
        </div>
        <div class="smallwidth">
          <div class="mb-3 col-12 ">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="" id="name" placeholder="Name - Optional">
          </div>
          <div class="mb-3 col-12 ">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="" id="email" placeholder="sue@redruth.com - Optional">
          </div>
          <div class="mb-3 col-12 ">
            <label for="phone" class="form-label">Phone</label>
            <input type="tel" inputmode="decimal" id="phone" placeholder="Phone - Optional">
          </div>
          <div class="mb-3 col-12 ">
            <label for="post" class="form-label">Post Code</label>
            <input type="number" inputmode="decimal" class="" id="post" placeholder="Post Code - Optional">
          </div>
          <div class="mb-3 col-12 text-center">
            <button type="button" class="btn round-button highlight-button" id="info2SubmitButton">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- submitted -->
  <main class="flex-shrink-0" id="submitted" style="display:none;">
    <div class="container">
      <div class="row justify-content-around align-content-center flex-wrap main-content">
        <div class="col-12 text-center">
          <div class="smallwidth">
            <h5>Thank you for your submission to The Redruth Collection!</h5>
            <hr>
            <p>Once we have a few more stories to share they will be available for everyone to listen to.
              Thank
              you again for your contribution and come back later to hear what your neighbors shared.</p>

            <a href="listen.html" class="btn round-button mt-1">Explore other collections</a>
          </div>
        </div>

        <div class="col-12 text-center mt-5">
          <p>Have more stories to tell?</p>
          <a href="https://readingroom.herokuapp.com/?promptid=36" class="btn round-button">Return to Recording Page</a>
        </div>
      </div>
    </div>
  </main>

  <!-- loading page -->
  <main class="flex-shrink-0" id="loading" style="display:none;">
    <div class="container">
      <div class="row justify-content-around align-content-center flex-wrap main-content">
        <div class="col-12 text-center">
          <h5>Uploading your file, just a second.</h5>
          <div class="spinner-border text-light mt-4" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </main>


  <!-- About page -->
  <main class="flex-shrink-0" id="about" style="display:none;">
    <div class="container">
      <div class="row justify-content-around align-content-center flex-wrap main-content">
        <div class="col-12 col-md-6 text-center">
          <h5 class="mb-3">About the Redruth Reading Room Project</h5>
          <p>This recording will be added to a repository of stories documenting the history of the town of Redruth and it's residents. We want any story big or small. These stories will be exhibited as part of a library in Redruth Reading Room, a small space in the old Library building which we will install and respond to the stories of the town. Please contribute a memory or story here. </p>
          <a href="#" class="btn round-button mt-1" id="backButton">Go Back</a>
          
        </div>
      </div>
    </div>
  </main>

  <!-- footer -->
  <footer class="footer mt-auto py-3 mb-5">
    <div class="container text-center">
      <span> <a href="#">Info</a> - <a href="#">Copyright
          <script>document.write(new Date().getFullYear())</script>
        </a> - <a href="#">Org</a>
      </span>
    </div>
  </footer>


</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/wavesurfer.js"></script>
<script src="/js/record.js"></script>
<script src="/js/prompt.js"></script>


</html>